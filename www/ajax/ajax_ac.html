<html>
<head>

<style>
span.highlight {
   font-weight: bold;
}
</style>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<script src="jquery-1.11.2.min.js"></script>
<script src="jquery-ui-1.11.2.custom/jquery-ui.min.js"></script>

<!-- http://stackoverflow.com/questions/820412/downloading-jquery-ui-css-from-googles-cdn -->
<link rel="stylesheet" type="text/css" href="jquery-ui-1.11.2.custom/jquery-ui.min.css">

<title>Solr Ajax Example</title>

<script language="Javascript">

    $(function() { 
      jQuery.ajaxSetup({
       'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript")}
      });

 // Below is the name of the textfield that will be autocomplete    
    $('#query').autocomplete({
        minLength: 2,
        source: function (request, response) {
         // request.term is the term searched for.
         // response is the callback function you must call to update the autocomplete's 
         // suggestion list.
         $.ajax({
             url: "http://54.154.0.207/solr/fatax/select",
             data: { q: request.term, wt:"json" },
             dataType: "jsonp",
             jsonp: 'json.wrf',
	           success: function (data) {             
                 response($.map(data.response.docs, function( item ) {
		             return { 
	                 label: item.name + ' (' + item.email + ')',
		               value: item.email,
		             }; 
	             }));	             
             },
             error: function () {
                 response([]);
             }
         })
        },
<!--        focus: function(event, ui) {-->
<!--           $('#query').val(ui.item.label);-->
<!--           return false;-->
<!--        },-->
        select: function(event, ui) {
           $('#query').val(ui.item.value);
           return false;
        }
        }).data('ui-autocomplete')._renderItem = function(ul, item) {
          return jQuery('<li>').data('ui-autocomplete-item', item ).append(item.label).appendTo(ul);
        };
        });
    
</script>
</head>
<body>

<form name="f1">
  <p>query: <input name="query" type="text" id="query">  
  <input value="Go" type="submit"></p>
</form>
</body>
</html>
